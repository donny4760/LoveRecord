<!DOCTYPE html>
<html lang="zh">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Love Xia Li</title>
	<link rel="stylesheet" href="./css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./css/main.css">
</head>

<body>
	<audio src="./music.mp3" autoplay="true" loop="loop"></audio>
	<div id="back">
		<div class="mask"></div>
		<div id="carousel" class="carousel slide carousel-fade carousel-position">
			<div class="carousel-inner" style="width: 100%;height: 100%;" id="background">
				<div class="item active" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background:url(./img/1.JPG);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/2.JPG) ;background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/3.JPG) ;background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/4.JPG) ;background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/5.jpg);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/6.jpg);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/7.jpg);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/8.jpg);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/9.jpg);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/10.jpg);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/11.JPG);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/12.JPG);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/13.JPG);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/14.JPG);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/15.jpg);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/16.JPG);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/17.JPG);background-size: cover;"></div>
				</div>
				<div class="item" style="width: 100%;height: 100%;">
					<div style="width: 100%;height: 100%;background-image: url(./img/end.JPG);background-size: cover;"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal show" style="top:24%;">
		<div class="modal-dialog" style="opacity: .9">
			<div class="modal-content" style="opacity:.85">
				<div class="modal-header">
					<h1 class="text-center" style="color: lightblue;font-family: 'JournalRegular', Arial, sans-serif;font-size: 7rem;">The Years</h1>
					<p class="text-center small-title">Yunan and the most beautiful girl in the word, Lydia</p>
				</div>
				<div class="modal-body text-center" style="line-height: 1.5rem;font-family: 'JournalRegular', Arial, sans-serif;font-size: 3rem;">
					<p>
						<span id="day" class="time-font"></span><span style="color:#A94442">/&nbsp;</span><span id="hour" class="time-font"></span><span style="color:#A94442">/&nbsp;</span><span id="minute" class="time-font"></span><span style="color:#A94442">/&nbsp;</span><span id="second" class="time-font"></span>
					</p>
					<p>
						days/hours/min/sec
					</p>
					<p class="text-center" style="color:lightblue; margin-top: 15px; font-weight: bold;" id="say"></p>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="./js/jquery-1.12.2.min.js"></script>
	<script type="text/javascript" src="./js/bootstrap.min.js"></script>
	<script type="text/javascript" src="./js/count-time.js"></script>
	<script>
		$(function() {
        //设置起始日期
        countTime('2014/01/15 24:00', 'day', 'hour', 'minute', 'second');
        var days = $('#day').text();
		
        //设置每一张图片对应的文字
        var says = new Array(
        	"Arizona, horse riding",
        	"黄金阁，女女最爱的流沙包",
        	"SF, 超级可爱的表情",
        	"Long Beach, 超级高 ",
        	"Long Beach, 花仙子",
        	"Garden Grove, 好吃",
        	"Huntington Beach, 跳跃的小精灵",
        	"Buffalo, ‘超大’的瀑布",
        	"Honululu, 完美的侧脸",
        	"Honululu, 抹茶！",
        	"Honululu, 海美，你更美",
        	"San Diego, 美人鱼！",
        	"Havard, 咱门只是不屑于进去而已╭(╯^╰)╮",
        	"Chicago, Bean!",
        	"Chicago， 超级冷！抱抱",
        	"Chicago, 美丽的女朋友吃美丽的晚餐",
        	"Chicago, 我加上美颜就跟你一样美了哎",
        	"Honululu, 哇哦看那个小少女",        	
        	);


		 //获取所有文件src用于预加载
		 imgs = new Array();
		 var imgsName = function () {
		 	var isImg = (url, suffix) => url.indexOf(suffix) > 0;
		 	var root = getRootPath();
		 	$.ajax({
		 		url: "/img",
		 		success: function(data) {
		 			$(data).find("a").each(function() {
		 				var href = $(this).attr("href");
		 				if (isImg(href, "jpg") || isImg(href, "JPG") || isImg(href, "png") || isImg(href, "PNG")) {
		 					var obj = new Object();
		 					obj.src = root + '/img/' + href;
		 					obj.rank = parseInt(href.split(".")[0]);
		 					if(isNaN(obj.rank))
		 						obj.rank = 10000;
		 					imgs.push(obj);
		 				}
		 			});
		 			imgs.sort((o1,o2) => o1.rank - o2.rank);
		 		}
		 	});
		 }();

        //开始函数
        	test = new Array();
        var start = function() {
        	var index = 0;
        	var rate = 6000;
        	$('#say').text(says[(index++) % says.length]);
        	setInterval(() => {
		        var image = new Image();
        		$('#say').hide();
        		$('#say').text(says[(index++) % says.length]);
        		$('#say').fadeToggle();
        		$('#carousel').carousel('next');
                //预加载下  一张图片
    	    	image.src = imgs[index].src;
    	    	test.push(image);
            }, rate);
        }();


        //获取根目录
        function getRootPath() {
            //获取当前网址
            var curWwwPath = window.document.location.href;
            //获取主机地址之后的目录
            var pathName = window.document.location.pathname;
            var pos = curWwwPath.indexOf(pathName);
            //获取主机地址
            var localhostPaht = curWwwPath.substring(0, pos);
            //获取带"/"的项目名
            var projectName = pathName.substring(0, pathName.substr(1).indexOf('/') + 1);
            return (localhostPaht + projectName);
        }



    });
</script>
</body>

</html>
